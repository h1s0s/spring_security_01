시큐리티에서 제공하는 어떤 공격자가 악의적인 목적으로 공격을 할 경우에 대응할 수 있는 대비책.

1장 CORS(Cross Origin Resource Sharing, 교차 출처 리소스 공유)
- 웹에서는 보안을 위해 기본적으로 한 웹 페이지(출처 A)에서 다른 웹 페이지(출처 B)의 데이터를 직접 불러오는 것을 제한하는데
이를 '동일 출처 정책(Same-Origin Policy)'이라고 한다.
- 만약 다른 출처의 리소스를 안전하게 사용하고자 할 경우 CORS가 등장하며, CORS는 특별한 HTTP 헤더를 통해 한 웹 페이지가
다른 출처의 리소스에 접근할 수 있도록 '허가'를 구하는 방법이라고 할 수 있다.
즉, 웹 애플리케이션이 다른 출처의 데이터를 사용하고자 할 때, 브라우저가 그 요청을 대신해서 해당 데이터를 사용해도 되는지
다른 출처에게 물어보는 것이라 할 수 있다.
- 출처를 비교하는 로직은 서버에 구현된 스펙이 아닌 브라우저에 구현된 스펙 기준으로 처리되며 브라우저는 클라이언트의
요청 헤더와 서버의 응답헤더를 비교해서 최종 응답을 결정한다.
- 두개의 출처를 비교하는 방법은 URL의 구성요소 중 Protocol, Host, Port 이 세가지가 동일한지 확인하면 되고 나머지는
틀려도 상관 없다.

ex) https://domain-a.com의 프론트 엔드 JS코드가 XMLHttpRequest를 사용하여, https://domain-b.com/data.json을 요청하는
경우 보안 상의 이유로, 브라우저는 스크립트에서 시작한 교차 출처 HTTP 요청을 제한한다.

XMLHttpRequest와 fetch API는 동일 출처 정책을 따르기 때문에 이 API를 사용하는 웹 애플리케이션은 자신의 출처와 동일한
리소스만 불러올 수 있으며, 다른 출처의 리소스를 불러오려면 그 출처에 올바른 CORS 헤더를 포함한 응답을 반환해야 한다.

CORS 종류

1. Simple Request
simple Request는 예비 요청(Prefilght) 과정 없이 자동으로 CORS가 작동하여 서버에 본 요청을 한 후, 서버가 응답의 헤더에
Access-Control-Allow-Origin과 같은값을 전송하면 브라우저가 서로 비교 후 CORS 정책 위반여부를 검사하는 방식이다.

2. Preflight Request(예비요청)
브라우저는 요청을 한번에 보내지 않고, 예비 요청과 본 요청으로 나누어 서버에 전달하는데, 브라우저가 예비요청을 보내는걸 preFlight라고 하며
이 예비요청의 메소드에는 OPTIONS가 사용된다.


2장 CSRF (Cross Site Request Forgery, 사이트 간 요청 위조)
- 웹 애플리케이션의 보안 취약점으로 공격자가 사용자로 하여금 이미 인증된 다른 사이트에 대해 원치 않는 작업을 수행하게 만드는 기법을 말한다.
- 이 공격은 사용자의 브라우저가 자동으로 보낼 수 있는 인증 정보, 예를 들어 쿠키나 기본 인증 세션을 이용하여 사용자가 의도하지 않은 요청을 서버로 전송하게 만든다.
- 이는 사용자가 로그인한 상태에서 악의적인 웹사이트를 방문하거나 이메일 등을 통해 악의적인 링크를 클릭할 때 발생할 수 있다.

CSRF 진행 순서
1. [사용자]가 [웹사이트]에 세션 쿠키를 발급 받고 인증을 받는다.
2. [공격자]가 [사용자]에게 "http://www.lotto.com/link"를 전달
3. [사용자]가 공격용 웹페이지에 접속. 공격용 웹페이지에는 <img src="https://shop.com/address=공격자주소">
4. [사용자]가 공격용 웹페이지를 열면, 브라우저는 이미지 파일을 받아오기 위해 공격용 URL을 연다.
5. 사용자의 승인이나 인지 없이 배송지가 등록됨으로써 공격이 완료된다.

CSRF 기능 활성화
@Bean
SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception{
    http.csrf(Customizer.withDefaults()); //csrf의 기능을 활성화한다. 별도 설정하지 않아도 활성화 상태로 초기화 됨
    return http.build();
}

- 토큰은 서버에 의해 생성되어 클라이언트의 세션에 저장되고, 폼을 통해 서버로 전송되는 모든 변경 요청에 포함되어야 하며
서버는 이 토큰을 검증하여 요청의 유효성을 확인한다.
- 기본적으로 'GET', 'HEAD', 'TRACE', 'OPTIONS'와 같은 안전한 메서드를 무시하고 'POST', 'PUT', 'DELETE'와 같은 변경 요청 메소드에
대해서만 CSRF 토큰 검사를 수행한다.

3장 SameSite
